# 

title: class内存布局

---

class的内存布局和这几个有关系`virtual函数`、`继承`、`多继承`、`virtual继承`

## 虚函数

类中自动添加一个虚函数指针，指向虚函数表，表中记录所有的虚函数地址。

## 继承+虚函数

子类会继承父类的虚函数指针，被子类重写的虚函数会覆盖父类的虚函数地址，没有被重写的仍然沿用父类虚函数，新增的虚函数则会按照定义的顺序依次添加到虚函数表中。

## 多继承+虚函数

子类会从多个父类继承它们的虚函数指针，子类重写的的虚函数会分别覆盖各虚函数表中的函数地址（如果父类中存在同名的函数都会被重写）。另外子类新增的虚函数会添加到第一个虚函数表中。

## 虚继承+虚函数

## 多虚继承+虚函数
